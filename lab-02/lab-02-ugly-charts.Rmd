---
title: "Lab 02 - Take a sad plot and make it better"
output: 
  tufte::tufte_html:
    css: ../lab.css
    tufte_variant: "envisioned"
    highlight: pygments
link-citations: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(eval = TRUE)
```

In this lab your task is to improve a plot that violates many data visualization best practices.
Your task is to get creative and make a visualisation that tells a (much!) better story than the original plot.

# Learning goals

-   Telling a story with data.
-   Data visualization best practices.
-   Reshaping data.

::: {.home}
Complete the following steps before you join the live workshop!
:::

# Workshop prep

You have **two** tasks you should complete before the workshop.
It is crucial you do these before the workshop to ensure a smooth (and enjoyable!) experience during the workshop:

1.  **Confirm GitHub org membership:** Confirm that you are a member of the course [GitHub organization](https://github.com/ids-s1-20). If not, let me know **asap**, before the night before the workshop.
2.  **Meet your teammates:** You can find your team assignment for the rest of the semester [here](https://github.com/ids-s1-19/team-assignments/blob/master/roster-team.csv) and we've also set up a channel for your team on, well, Teams! Say hi to everyone there before the workshop.

::: {.video}
Complete the following steps during the live workshop with your team.
:::

# Warm up with your team

Before we get to work let's play a little game!
Can you find all the errors in this graph?
How could you fix them?

```{r echo=FALSE, fig.fullwidth=TRUE}
knitr::include_graphics("img/Speaking-the-world.jpg")
```

# Getting started

Go to the course and locate your Lab 02 repo, which should be named `lab-02-ugly-charts-YOUR_TEAMNAME`.
Grab the URL of the repo, and clone it in RStudio Cloud.
Refer to [HW 00](https://ids-s1-20.github.io/homework/hw-00/hw-00-pet-names.html) if you would like to see step-by-step instructions for cloning a repo into an RStudio project.

First, open the R Markdown document `lab-02.Rmd` and knit it.
Make sure it compiles without errors.
The output will be a markdown document (`.md`) file with the same name.

# Exercises

Before getting started with the Exercises, run the following code in the Console to load this package.

```{r load-packages, message=FALSE, eval=TRUE}
library(tidyverse)
```

### Instructional staff employment trends

The American Association of University Professors (AAUP) is a nonprofit membership association of faculty and other academic professionals.
[This report](https://www.aaup.org/sites/default/files/files/AAUP_Report_InstrStaff-75-11_apr2013.pdf) compiled by the AAUP shows trends in instructional staff employees between 1975 and 2011, and contains an image very similar to the one given below.

```{r echo=FALSE, fig.fullwidth=TRUE}
knitr::include_graphics("img/staff-employment.png")
```

Let's start by loading the data used to create this plot.

```{r load-data-staff, message=FALSE, eval=TRUE}
staff <- read_csv("data/instructional-staff.csv")
```

Each row in this dataset represents a faculty type, and the columns are the years for which we have data.
The values are percentage of hires of that type of faculty for each year.

```{r echo=FALSE}
staff
```

In order to recreate this visualization we need to first reshape the data to have one variable for faculty type and one variable for year.
In other words, we will convert the data from the long format to wide format.

But before we do so, a thought exercise: If the long data will have a row for each year/faculty type combination, and there are 5 faculty types and 11 years of data, how many rows will the data have?

We do the wide to long conversation using a new function: `pivot_longer()`.
The animation below show how this function works, as well as its counterpart `pivot_wider()`.

```{r echo=FALSE}
knitr::include_graphics("img/tidyr-longer-wider.gif")
```

The function has the following arguments:

```{r eval=FALSE}
pivot_longer(data, cols, names_to = "name")
```

-   The first argument is `data` as usual.
-   The second argument, `cols`, is where you specify which columns to pivot into longer format -- in this case all columns except for the `faculty_type`
-   The third argument, `names_to`, is a string specifying the name of the column to create from the data stored in the column names of data -- in this case `year`

```{r}
staff_long <- staff %>%
  pivot_longer(cols = -faculty_type, names_to = "year") %>%
  mutate(value = as.numeric(value))
```

Let's take a look at what the new longer data frame looks like.

```{r}
staff_long
```

And now let's plot is as a line plot.
A possible approach for creating a line plot where we color the lines by faculty type is the following:

```{r eval=TRUE, fig.width=10}
staff_long %>%
  ggplot(aes(x = year, y = value, color = faculty_type)) +
  geom_line()
```

But note that this results in a message as well as an unexpected plot.
The message is saying that there is only one observation for each faculty type year combination.
We can fix this using the `group` aesthetic following.

```{r eval=FALSE, fig.width=10}
staff_long %>%
  ggplot(aes(x = year, y = value, group = faculty_type, color = faculty_type)) +
  geom_line()
```

1.  Include the line plot you made above in your report.
    Also fix the title, axis labels, and legend label.

2.  Suppose the objective of this plot was to show that the proportion of part-time faculty have gone up over time compared to other instructional staff types.
    What changes would you propose making to this plot to tell this story?
    Come up with two ideas and write them down.
    The more precise you are, the easier the next step will be.
    Get creative, and think about how you can modify the dataset to give you new/different variables to work with.

3.  Implement at least one of these ideas you came up with in the previous exercise.
    You should produce an improved data visualisation and accompany your visualisation with a brief paragraph describing the choices you made in your improvement, specifically discussing what you didn't like in the original plot and why, and how you addressed them in the visualisation you created.

`r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` *Commit and push your changes to GitHub with an appropriate commit message again. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.*

<div>

Aim to make it to this point during the live workshop.

</div>

# Wrapping up

This is the end of the "in person" workshop!
Feel free to continue if you're confident with the previous exercises, otherwise this is your chance to ask questions.
You can finish this section in your own time.

### Fisheries

Fisheries and Aquaculture Department of the Food and Agriculture Organization of the United Nations collects data on fisheries production of countries.
[This Wikipedia page](https://en.wikipedia.org/wiki/Fishing_industry_by_country) lists fishery production of countries for 2016.
For each country tonnage from capture and aquaculture are listed.
Note that countries whose total harvest was less than 100,000 tons are not included in the visualization.

A researcher shared with you the following visualization they created based on these data `r emo::ji("flushed")`.

```{r echo=FALSE, fig.fullwidth=TRUE}
knitr::include_graphics("img/fisheries.png")
```

3.  Can you help them make improve it? First, brainstorm how you would improve it. Then create the improved visualization and write up the changes/decisions you made as bullet points. It's ok if some of your improvements are aspirational, i.e. you don't know how to implement it, but you think it's a good idea. Ask a tutor for help, but also keep an eye on the time. Implement what you can and leave note identifying the aspirational improvements.

```{r load-data-fisheries, eval=FALSE}
fisheries <- read_csv("data/fisheries.csv")
```

`r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` *Commit and push your changes to GitHub with an appropriate commit message again. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards.*

This is to finish up the workshop.
Depending on the time you may need to do this after the workshop ended.

Go back through your write up to make sure you're following coding style guidelines we discussed in class.
Make any edits as needed.

Also, make sure all of your R chunks are properly labeled, and your figures are reasonably sized.

Once the team leader for the week pushes their final changes, others should *pull* the changes and knit the R Markdown document to confirm that they can reproduce the report.

## More ugly charts

Want to see more ugly charts?

-   [Flowing Data - Ugly Charts](https://flowingdata.com/category/visualization/ugly-visualization/)
-   [Reddit - Data is ugly](https://www.reddit.com/r/dataisugly/)
-   [Missed Opportunities and Graphical Failures](http://www.datavis.ca/gallery/missed.php)
-   [(Mostly Bad) Graphics and Tables](http://users.stat.umn.edu/~rend0020/Teaching/STAT8801-resources/graphics/index.html)
